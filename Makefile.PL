use 5.006;
use strict;
use warnings FATAL => 'all';
use ExtUtils::MakeMaker;

WriteMakefile(
    NAME             => 'venetian',
    AUTHOR           => q{Christian KÃ¼hnel <christian.kuehnel@gmail.com>},
    VERSION		     => '0.1.0',
    #ABSTRACT_FROM    => 'lib/Venetian.pm',
    LICENSE          => 'Apache_2_0',
    PL_FILES         => {},
    MIN_PERL_VERSION => 5.010,
    CONFIGURE_REQUIRES => {
        'ExtUtils::MakeMaker' => 0,
    },
    BUILD_REQUIRES => {
        'Test::More' => 0,
        'Test::MockModule' => 0,
        'Time::HiRes' => 0,
        'Test::Perl::Critic' => 0,
        'Test::Pod' => 0,
        'Devel::Cover::Report::Coveralls' => 0,
    },
    PREREQ_PM => {
        'experimental' => 0,
    },
    dist  => { COMPRESS => 'gzip -9f', SUFFIX => 'gz', },
    clean => { FILES => 'fhem-venetian-*' },
);

#
 sub MY::postamble {
    return q{
ifndef FHEM_HOME
FHEM_HOME = ~fhem
endif

fhem: 
	$(NOECHO) $(ECHO) using fhem home directory: \"$(FHEM_HOME)\"
	$(CP) lib/Venetian.pm $(FHEM_HOME)/FHEM/99_Venetian.pm
	mkdir -p $(FHEM_HOME)/FHEM/lib/VenetianBlinds
	$(CP) lib/VenetianBlinds/*.pm $(FHEM_HOME)/FHEM/lib/VenetianBlinds	
	chown fhem:dialout $(FHEM_HOME)/FHEM/99_Venetian.pm 
	chown fhem:dialout $(FHEM_HOME)/FHEM/lib/VenetianBlinds/*

fhem_restart: fhem
	service fhem stop
	sleep 5
	service fhem start
	
fhem_doc: fhem
	cd $(FHEM_HOME) ; perl contrib/commandref_join.pl
	
fhem_release: test
	svn checkout https://svn.code.sf.net/p/fhem/code/trunk/fhem fhem-code
	$(CP) lib/Venetian.pm fhem-code/FHEM/99_Venetian.pm
	mkdir -p fhem-code/FHEM/lib/VenetianBlinds
	$(CP) lib/VenetianBlinds/*.pm fhem-code/FHEM/lib/VenetianBlinds	
	cd fhem-code; perl contrib/commandref_join.pl
	svn status fhem-code
}
};

1;

